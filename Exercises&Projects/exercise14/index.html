<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercise 14 | Hacker Terminal</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        body {
            background-color: black;
            color: rgb(2, 255, 2);
            font-size: 30px;
            padding-left: 10px;
        }
    </style>
</head>

<body>

    <script>

        function addItem(val){
            let div = document.createElement("div");
                    div.innerText = val;
                    document.body.insertAdjacentElement("beforeend", div)
        }

        async function wait() {
            return new Promise((res, rej) => {
                let delay = 1 + 3 * Math.random();
                setTimeout(() => {         
                 res();
                }, delay * 1000);    
            })
        }


         function blinking() {
            let i = 0;
            let last = document.body.getElementsByTagName("div");
            last = last[last.length-1];
              let interval  =  setInterval(() => {
                if(last.innerText.endsWith("...")){
                    last.innerText = last.innerText.slice(0,last.innerText.length-3);
                  
                }
                else{
                    last.innerText += ".";
                }
            }, 300);  
            return interval;             
        }

        async function main() {
            let arr = ["Reading Files","Running Torjan Horse", "Corrupting Disk C:", "Encrypting Codes", "Uploading Passwords To Server"];
            for (const val of arr) {
                await addItem(val);
               let interval =  blinking();
                await wait();
                clearInterval(interval); 
                
            }
        }
        main(); 
    </script>
</body>

</html>